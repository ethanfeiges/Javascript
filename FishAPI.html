
<!--Code displays information about 8 different types of fish by calling the FishWatch.gov Species Content API.
The user can select a certain fish and display specific details about them (Availability, Biology, etc)
-->
<style>
  *{
    width: 600px;
    margin: auto;
    
  }

  #outline{
    border-style:dotted;
    width: 900px;
    background-color: azure;
    border-color: red;
    padding: 5px;
    
    
   
  }


  label{
    font-size: 30px;
    
  }
  img {
  width: 300px;
  height: auto;
  } 
  div{
    border-style:solid;
    width: 300px;
    height: auto;
    padding: 10px; 
    border-width: thick;
    border-top-color: blue;
    border-bottom-color: blue;
    border-left-color: gray;
    border-right-color: gray;
  }

  #fishForm{
    font-style: Georgia;
    
    
  }
  #userFish{
    width: auto;
    font-weight: bold;
    margin-bottom: 20px;
  }

  #fishText{
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
  }

  #myTitle{
    width: auto;
    text-align: left;
    font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    font-size: .85em;
  }

  legend{
    width: 1000px;
    text-align: left;
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
    
  }
  input[type=checkbox] {
    width: 20px;
  }
 input[type=submit]{
    width: 10em;
    height: 2em;
  }

  br{
    margin-bottom: 20px;
  }


</style>
<div id = "outline">


<form id = "fishForm">

    <label for = "fish">Select a fish you would like to learn more about</label>
    <br></br>
    <select name = "fish" id = "userFish">
      <optgroup label="Shellfish">
        <option value="American Lobster">American Lobster</option>
        <option value="Alaska Snow Crab">Alaska Snow Crab</option>
        <option value = "Pink Shrimp">Pink Shrimp</option>
        <option value = "Pacific Oyster">Pacific Oyster</option>
      </optgroup>
      <optgroup label="Finned fish">
        <option value = "Acadian Redfish">Acadian Redfish</option>
        <option value = "Atlantic Bigeye Tuna">Atlantic Bigeye Tuna</option>
        <option value = "Black Sea Bass">Black Sea Bass</option>
        <option value = "Pacific Cod">Pacific Cod</option>

      </optgroup>
    </select>

    <!--ids cannot be numbers, but are named so they can be gone through in a for loop-->
    <legend>Select what you would like to know about your fish</legend>
    <input type = "checkbox" id = "x1" value = "Fishery Management">Fishery Management</option>
    <input type = "checkbox" id = "x2" value = "Availability">Availability</option>
    <input type = "checkbox" id = "x3" value = "Biology">Biology</option>
    <input type = "checkbox" id = "x4" value = "Habitat">Habitat</option>
    <input id = "submit" type = "submit" value = "Get data"></input>
</form>
<!--Stores the image from the image gallery-->

<div id = "imgdis">
  
  <img id = "myImg" src = "" alt = "" title = ""></img>
  <p id = "myTitle"><b></b></p>
</div>




<!--Element to store html generated from API call to Fish Watch-->
<p id="Fishtext"></p>


<script>
  // variable that holds form DOM
  var form = document.getElementById('fishForm');
 
  //If user presses submit 
  form.addEventListener('submit', function(event) {
    event.preventDefault() // prevents from auto submitting
    // clear the previous html
    document.getElementById('Fishtext').innerHTML = ""; 
    var fish = document.getElementById('userFish').value;
  
    // formats user input for api call
    const URL = "https://www.fishwatch.gov/api/species/" + fish.split(' ').map(c => c.charAt(0).toLowerCase() + c.substring(1).toLowerCase()).join(' ').replace(' ', '-');;
    const getFish = async () => {
      try {
        document.getElementById("Fishtext").innerHTML
        const response = await fetch(URL);
        if (response.ok) {
          const res = await response.json();
          document.getElementById("myImg").src = res["0"]["Image Gallery"][2]['src'];
          document.getElementById("myImg").alt = res["0"]["Image Gallery"][2]['alt'];
          document.getElementById("myTitle").innerHTML = res["0"]["Image Gallery"][2]['title'];
    
          for(i = 1; i <= 4; i++){
            if(document.getElementById('x' + i).checked){
             // displays text on UI 
             if(res["0"][document.getElementById("x"+i).value] != null){
              document.getElementById("Fishtext").innerHTML += "<b>" + (document.getElementById('x'+i).value + ":</b>" + 
              (res["0"][document.getElementById("x"+i).value])) + "<br></br>";
             }
             else{
              document.getElementById("Fishtext").innerHTML += "<i> " + fish + " currently does not have any information for " + document.getElementById('x'+i).value + "</i><br></br>";
             }
             
            }
  
          }
          
        }
      } catch (error) {
        console.log(error);
        
      }
    }
    getFish();
    
  });
     
</script>

</div>

